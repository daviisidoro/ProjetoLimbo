<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>UMBRA | APP</title>
    <style>
        /* ==========================================================================
           1. CORE & RESET (APP NATIVE FEEL)
           ========================================================================== */
        :root {
            --bg-void: #000000;
            --bg-panel: #0a0a0a;
            --bg-border: #1a1a1a;
            --text-main: #d0d0d0;
            --text-dim: #666;
            --highlight: #fff;
            
            /* Fontes */
            --font-tech: 'Courier New', monospace;
            --font-ui: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --font-header: 'Impact', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }

        html {
            background: #000;
        }

        body {
            background-color: var(--bg-void);
            color: var(--text-main);
            font-family: var(--font-ui);
            /* TRAVA O SITE NA TELA (IMPEDE SCROLL GERAL) */
            position: fixed; 
            top: 0; left: 0; right: 0; bottom: 0;
            height: 100%;     /* Fallback */
            height: 100dvh;   /* Altura dinâmica real do mobile */
            width: 100%;
            overflow: hidden; /* Nada sai da tela */
            display: flex;
            flex-direction: column;
        }

        /* Scrollbar fina interna */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }

        /* ==========================================================================
           2. CAMADAS DE EFEITO (FUNDO)
           ========================================================================== */
        .fx-scanline {
            position: absolute; inset: 0; pointer-events: none; z-index: 90;
            background: linear-gradient(to bottom, transparent 50%, rgba(0,0,0,0.3) 51%);
            background-size: 100% 4px; opacity: 0.6;
        }
        .fx-vignette {
            position: absolute; inset: 0; pointer-events: none; z-index: 89;
            background: radial-gradient(circle, transparent 50%, #000 120%);
        }

        /* ==========================================================================
           3. LAYOUT FLEXBOX (O SEGREDO DA RESPONSIVIDADE)
           ========================================================================== */
        
        /* HEADER (Fixo no topo) */
        header {
            height: 50px;
            background: var(--bg-panel);
            border-bottom: 1px solid var(--bg-border);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 15px;
            padding-top: env(safe-area-inset-top); /* Proteção para Notch */
            flex-shrink: 0; /* Não encolhe */
            z-index: 100;
        }
        
        .brand { font-family: var(--font-header); font-size: 22px; color: #fff; letter-spacing: 1px; }
        .brand span { font-family: var(--font-tech); font-size: 10px; color: #555; margin-left: 5px; letter-spacing: 2px; }
        .clock { font-family: var(--font-tech); font-size: 12px; color: #888; }

        /* ÁREA DE TRABALHO (Ocupa o espaço que sobra) */
        #workspace {
            flex: 1; /* Ocupa todo o espaço restante verticalmente */
            position: relative;
            overflow: hidden;
            display: flex;
        }

        /* BARRAS LATERAIS (PC) */
        #sidebar-pc, #widgets-pc {
            width: 250px; background: #050505; border-right: 1px solid var(--bg-border);
            display: flex; flex-direction: column; padding: 20px 0; z-index: 50;
        }
        #widgets-pc { border-right: none; border-left: 1px solid var(--bg-border); width: 280px; }

        /* BOTÕES DO MENU PC */
        .pc-btn {
            padding: 12px 20px; background: transparent; border: none; color: #777;
            text-align: left; font-family: var(--font-ui); font-size: 12px; cursor: pointer;
            border-left: 3px solid transparent; transition: 0.2s;
        }
        .pc-btn:hover, .pc-btn.active { background: #111; color: #fff; border-left-color: #fff; }

        /* PALCO CENTRAL (Onde os painéis aparecem) */
        #stage {
            flex: 1; /* Ocupa o resto da largura */
            position: relative;
            background: var(--bg-void);
            overflow: hidden; 
        }

        /* PAINÉIS (Telas individuais) */
        .panel {
            position: absolute; inset: 0; /* Cola nos 4 cantos do pai */
            display: none; 
            flex-direction: column;
            overflow: hidden; /* Scroll interno se necessário */
            opacity: 0; animation: fadeIn 0.2s forwards;
        }
        .panel.active { display: flex; }
        @keyframes fadeIn { to { opacity: 1; } }

        /* MENU INFERIOR (MOBILE - FIXO EMBAIXO) */
        #mobile-nav {
            height: 60px;
            background: #080808;
            border-top: 1px solid var(--bg-border);
            display: flex; justify-content: space-around; align-items: center;
            flex-shrink: 0; /* Não encolhe */
            padding-bottom: env(safe-area-inset-bottom); /* Proteção barra iOS */
            z-index: 200;
        }
        
        .mob-btn {
            background: transparent; border: none; color: #555;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            width: 100%; height: 100%; cursor: pointer;
        }
        .mob-icon { font-size: 20px; margin-bottom: 4px; }
        .mob-label { font-size: 9px; font-family: var(--font-tech); text-transform: uppercase; }
        .mob-btn.active { color: #fff; text-shadow: 0 0 8px rgba(255,255,255,0.4); }

        /* FOOTER PC */
        #footer-pc {
            height: 30px; background: #000; border-top: 1px solid var(--bg-border);
            display: flex; align-items: center; justify-content: center;
            font-family: var(--font-tech); font-size: 10px; color: #444;
            flex-shrink: 0;
        }

        /* ==========================================================================
           4. ESTILOS DOS CONTEÚDOS INTERNOS
           ========================================================================== */
        
        /* -- MAPA -- */
        .map-container { width: 100%; height: 100%; position: relative; background: radial-gradient(circle at center, #111 0%, #000 100%); }
        .grid { position: absolute; inset: 0; background-image: linear-gradient(#222 1px, transparent 1px), linear-gradient(90deg, #222 1px, transparent 1px); background-size: 40px 40px; opacity: 0.1; }
        
        .dot {
            position: absolute; width: 14px; height: 14px; background: #fff; border-radius: 50%;
            transform: translate(-50%, -50%); cursor: pointer; z-index: 10;
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
        }
        /* Hitbox maior para toque no celular */
        .dot::before { content: ''; position: absolute; inset: -15px; background: transparent; }
        .dot-pulse { position: absolute; inset: -5px; border: 1px solid #fff; border-radius: 50%; animation: pulse 2s infinite; opacity: 0; }
        @keyframes pulse { 0% { transform: scale(0.5); opacity: 1; } 100% { transform: scale(3); opacity: 0; } }

        /* -- TERMINAL -- */
        .term-wrap { padding: 15px; height: 100%; display: flex; flex-direction: column; font-family: var(--font-tech); font-size: 12px; }
        #term-log { flex: 1; overflow-y: auto; color: #aaa; margin-bottom: 10px; }
        .line { margin-bottom: 4px; word-wrap: break-word; }
        .input-box { display: flex; border-top: 1px solid #333; padding-top: 10px; }
        #term-input { background: transparent; border: none; color: #fff; flex: 1; font-family: inherit; margin-left: 8px; font-size: 16px; /* 16px evita zoom no iOS */ }

        /* -- ARQUIVOS (DB) -- */
        .db-wrap { display: flex; height: 100%; }
        .db-list { width: 100%; overflow-y: auto; padding: 10px; }
        .file-btn {
            display: block; width: 100%; padding: 15px; background: #0c0c0c; border: 1px solid #222;
            color: #888; margin-bottom: 8px; font-family: var(--font-tech); font-size: 11px; text-align: left;
        }
        .file-btn:active { background: #222; color: #fff; }
        
        .db-reader { position: absolute; inset: 0; background: #000; padding: 20px; overflow-y: auto; display: none; z-index: 20; }
        .db-reader.open { display: block; }
        
        .doc-head { border-bottom: 1px solid #333; margin-bottom: 15px; padding-bottom: 10px; }
        .doc-title { font-size: 20px; color: #fff; text-transform: uppercase; font-family: var(--font-header); }
        .doc-text { color: #bbb; line-height: 1.6; font-size: 14px; text-align: justify; }
        .close-btn { margin-bottom: 15px; background: #222; border: none; color: #fff; padding: 8px 15px; font-size: 10px; font-family: var(--font-tech); }

        /* -- CRYPT -- */
        .crypt-wrap { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; padding: 20px; text-align: center; }
        .crypt-box { border: 1px solid #333; padding: 30px; background: #050505; width: 100%; max-width: 400px; }
        .crypt-code { font-family: var(--font-tech); font-size: 18px; color: #fff; letter-spacing: 2px; margin: 20px 0; min-height: 24px; }
        .btn-action { background: #fff; color: #000; border: none; padding: 12px 24px; font-weight: bold; font-family: var(--font-tech); cursor: pointer; }

        /* ==========================================================================
           5. RESPONSIVIDADE (MOBILE VS PC)
           ========================================================================== */
        @media (min-width: 900px) {
            /* MODO PC */
            #mobile-nav { display: none; } /* Esconde menu mobile */
            .db-reader { position: static; display: block; width: 100%; border-left: 1px solid #222; } /* Leitor fixo ao lado */
            .db-list { width: 300px; }
            .db-wrap { flex-direction: row; }
            .close-btn { display: none; } /* Não precisa fechar no PC */
        }

        @media (max-width: 899px) {
            /* MODO MOBILE */
            #sidebar-pc, #widgets-pc, #footer-pc { display: none !important; } /* Esconde coisas de PC */
            .dot { width: 20px; height: 20px; } /* Pontos maiores para toque */
        }
    </style>
</head>
<body>

    <div class="fx-scanline"></div>
    <div class="fx-vignette"></div>

    <header>
        <div class="brand">UMBRA<span>NET</span></div>
        <div class="clock" id="clock">00:00</div>
    </header>

    <div id="workspace">
        
        <aside id="sidebar-pc">
            <button class="pc-btn active" onclick="go('map')">MAPA GLOBAL</button>
            <button class="pc-btn" onclick="go('term')">TERMINAL</button>
            <button class="pc-btn" onclick="go('db')">BANCO DE DADOS</button>
            <button class="pc-btn" onclick="go('crypt')">DECODIFICADOR</button>
        </aside>

        <main id="stage">
            
            <div id="view-map" class="panel active">
                <div class="map-container">
                    <div class="grid"></div>
                    <div class="dot" style="top:30%; left:20%;" onclick="alert('NODE NYC: ATIVO')"><div class="dot-pulse"></div></div>
                    <div class="dot" style="top:25%; left:50%;" onclick="alert('NODE LDN: SILENCIOSO')"><div class="dot-pulse"></div></div>
                    <div class="dot" style="top:70%; left:30%;" onclick="alert('NODE SAO: CRÍTICO')"><div class="dot-pulse"></div></div>
                    <div class="dot" style="top:35%; left:85%;" onclick="alert('NODE TKY: OFFLINE')"><div class="dot-pulse"></div></div>
                    
                    <div style="position: absolute; bottom: 10px; left: 10px; font-family: var(--font-tech); font-size: 10px; color: #aaa; background: rgba(0,0,0,0.8); padding: 5px;">
                        RASTREAMENTO SATÉLITE<br>4 SINAIS ATIVOS
                    </div>
                </div>
            </div>

            <div id="view-term" class="panel">
                <div class="term-wrap">
                    <div id="term-log">
                        <div class="line" style="color:#fff">UMBRA OS v12.0 [MOBILE]</div>
                        <div class="line">Digite 'ajuda' para comandos.</div>
                    </div>
                    <div class="input-box">
                        <span style="color:#0f0">></span>
                        <input type="text" id="term-input" autocomplete="off">
                    </div>
                </div>
            </div>

            <div id="view-db" class="panel">
                <div class="db-wrap">
                    <div class="db-list">
                        <div style="padding:10px; font-size:10px; color:#555">ARQUIVOS DISPONÍVEIS:</div>
                        <button class="file-btn" onclick="readDoc(1)">#01 PROTOCOLO VIGILANTE</button>
                        <button class="file-btn" onclick="readDoc(2)">#02 ENTIDADE: SOMBRA</button>
                        <button class="file-btn" onclick="readDoc(3)">#03 LOCAIS NULOS</button>
                    </div>
                    <div class="db-reader" id="doc-view">
                        <button class="close-btn" onclick="closeDoc()">VOLTAR</button>
                        <div class="doc-head">
                            <div class="doc-title" id="d-title">TÍTULO</div>
                        </div>
                        <div class="doc-text" id="d-body">Selecione um arquivo.</div>
                    </div>
                </div>
            </div>

            <div id="view-crypt" class="panel">
                <div class="crypt-wrap">
                    <div class="crypt-box">
                        <div style="font-size:10px; color:#555; margin-bottom:10px">SINAL #922 CRIPTOGRAFADO</div>
                        <div class="crypt-code" id="crypt-target">BLOQUEADO</div>
                        <button class="btn-action" onclick="crackCode()">QUEBRAR SENHA</button>
                    </div>
                </div>
            </div>

        </main>

        <aside id="widgets-pc">
            <div style="padding:15px; border-bottom:1px solid #222; font-size:10px; color:#555">LOGS DE SISTEMA</div>
            <div id="pc-logs" style="padding:15px; font-family:var(--font-tech); font-size:10px; color:#666; height:200px; overflow:hidden"></div>
        </aside>

    </div>

    <nav id="mobile-nav">
        <button class="mob-btn active" onclick="go('map')">
            <div class="mob-icon">⌖</div><div class="mob-label">Mapa</div>
        </button>
        <button class="mob-btn" onclick="go('term')">
            <div class="mob-icon">_</div><div class="mob-label">Cmd</div>
        </button>
        <button class="mob-btn" onclick="go('db')">
            <div class="mob-icon">≡</div><div class="mob-label">Dados</div>
        </button>
        <button class="mob-btn" onclick="go('crypt')">
            <div class="mob-icon">?</div><div class="mob-label">Crypt</div>
        </button>
    </nav>

    <footer id="footer-pc">
        <div>ID: FANTASMA</div>
        <div>CONEXÃO SEGURA</div>
    </footer>

    <script>
        // 1. RELÓGIO
        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'});
        }, 1000);

        // 2. NAVEGAÇÃO
        function go(id) {
            // Remove active de todos
            document.querySelectorAll('.panel, .mob-btn, .pc-btn').forEach(el => el.classList.remove('active'));
            
            // Ativa painel
            document.getElementById('view-' + id).classList.add('active');
            
            // Ativa botão (truque simples para destacar o clicado no grupo)
            const btns = document.querySelectorAll(`button[onclick="go('${id}')"]`);
            btns.forEach(b => b.classList.add('active'));
        }

        // 3. DOCUMENTOS
        const docs = [
            {t: "PROTOCOLO VIGILANTE", b: "Nós operamos nas sombras. A missão é solitária. O objetivo é conter o vazamento do Vazio para a superfície. Confie em ninguém."},
            {t: "ENTIDADE: SOMBRA", b: "Avistada em centros urbanos. Alimenta-se de silêncio. Não olhe diretamente. Se você ouvir zumbidos, corra."},
            {t: "LOCAIS NULOS", b: "Estações de metrô abandonadas e túneis são pontos de entrada para o Limbo. Mantenha distância."}
        ];

        function readDoc(idx) {
            const d = docs[idx-1];
            document.getElementById('d-title').innerText = d.t;
            document.getElementById('d-body').innerText = d.b;
            
            // Abre leitor no mobile
            const reader = document.getElementById('doc-view');
            reader.classList.add('open');
        }

        function closeDoc() {
            document.getElementById('doc-view').classList.remove('open');
        }

        // 4. TERMINAL
        const tIn = document.getElementById('term-input');
        tIn.addEventListener('keydown', (e) => {
            if(e.key === 'Enter') {
                const val = tIn.value.toLowerCase();
                const log = document.getElementById('term-log');
                log.innerHTML += `<div class="line" style="color:#fff">> ${tIn.value}</div>`;
                
                if(val === 'ajuda') log.innerHTML += `<div class="line" style="color:#888">Cmds: status, scan, limpar</div>`;
                else if(val === 'status') log.innerHTML += `<div class="line" style="color:#0f0">SISTEMA ONLINE.</div>`;
                else if(val === 'limpar') log.innerHTML = '';
                else if(val === 'scan') log.innerHTML += `<div class="line" style="color:#f00">3 AMEAÇAS DETECTADAS.</div>`;
                else log.innerHTML += `<div class="line" style="color:#f00">Erro.</div>`;
                
                tIn.value = '';
                log.scrollTop = log.scrollHeight;
            }
        });

        // 5. CRYPT
        function crackCode() {
            const el = document.getElementById('crypt-target');
            const txt = "AS SOMBRAS TE VEEM";
            const ch = "XYZ0123456789#@";
            let i = 0;
            const t = setInterval(() => {
                el.innerText = txt.split('').map((c, x) => (x < i ? txt[x] : ch[Math.floor(Math.random()*ch.length)])).join('');
                if(i >= txt.length) clearInterval(t);
                i += 1/2;
            }, 50);
        }

        // 6. LOGS PC
        const pcLog = document.getElementById('pc-logs');
        setInterval(() => {
            const msg = ["Ping servidor...", "Pacote recebido", "Varredura completa", "Criptografia atualizada"];
            const m = msg[Math.floor(Math.random()*msg.length)];
            const d = document.createElement('div');
            d.innerText = `> ${m}`;
            d.style.marginBottom = "5px";
            pcLog.prepend(d);
        }, 3000);

    </script>
</body>
</html>
